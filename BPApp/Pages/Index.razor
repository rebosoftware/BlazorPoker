@page "/"
@using BPData
@using BPData.Lists;
@using BPData.Models;
@using BPData.Services;

<!--Game code-behind-->
@inherits IndexBase
<!--services-->
@inject DeckService DeckSvc
@inject EvalService EvalService
@inject GameService GameSvc

@if (GameSvc == null || GameSvc.State == BPData.BPConstants.GS_PreGame ||
     GameSvc.State == BPData.BPConstants.GS_WaitForPlayers)
{
    <p><em>Loading...</em></p>
}
else
{
<div style="background-image:url(@TableImage);height:@TableHeight;width:@TableWidth;background-position:center;background-repeat:no-repeat;background-size:cover;">
    <br><br /><br />
    @foreach (Player p in GameSvc.GetPlayers())
    {
        <Hand DiscardHeight="@DiscardHeight" DiscardWidth="@DiscardWidth" cardheight="@CardHeight" cardwidth="@CardWidth" player="@p" alwaysshow="@AlwaysShow" me="@me"></Hand>
        <br />
    }

</div>
    
    <br />
    <button disabled="@DisableDiscard" class="btn btn-primary" @onclick="Discard">Discard/Hold</button>
    <span>&nbsp;</span>
    <button disabled="@DisableDraw" class="btn btn-primary" @onclick="Draw">Draw</button>
    <span>&nbsp;</span>
    <button class="btn btn-primary" @onclick="NewGame">New Game!</button>


}

@code {

    //we do code-behind here :) see IndexBase

}
